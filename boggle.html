<html>
<head>
	<title>Lorne's Boggle Game</title>
	<meta charset="UTF-8">
	<meta name="description" content="Boggle Game by Lorne">
	<meta name="keywords" content="HTML,CSS,XML,JavaScript">
	<meta name="author" content="Lorne Miller">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<style type="text/css">
.header{
	text-align: center;
}
.grid-container {
	display: grid;
	grid-template-columns: auto auto auto auto auto;
	background-color: #2196F3;
	padding: 10px;
}
.grid-item {
	background-color: rgba(255, 255, 255, 0.8);
	border: 1px solid rgba(0, 0, 0, 0.8);
	padding: 20px;
	font-size: 30px;
	text-align: center;
}
.center{

}
.setup{
	text-align: -moz-center; text-align: -webkit-center;
}
.letter{
	width: 20px;
}
.rightMenu{
	/*text-align: -moz-left; text-align: -webkit-left;*/
	display: absolute;
	position: absolute;

}
.centerContent{
	display: flex;
	align-items: center;
	justify-content: center;
}

</style>

<!-- <script src="https://gist.github.com/lmiller36/b65c6d3e86b8419f38b4399bb41b2eac.js"></script> -->

<script type="text/javascript">
	// getSampleText()
	// async function getSampleText() {
	// 	console.log( (await fetch('https://www.w3.org/TR/PNG/iso_8859-1.txt')).text() );
	// }
	getEnglishWords();
	function getEnglishWords(){

		fetch("https://gist.githubusercontent.com/lmiller36/b65c6d3e86b8419f38b4399bb41b2eac/raw/4f375a95ffc9b21f6da6e0c8739a3332fd981297/words.txt")
		.then( r => r.text() )
		.then( t => {
			document.words = t.split("\n");
		} )

	}
</script>

<script type="text/javascript">
	document.numberOfPlayers = 1;
	document.boggleDice = ["AAAFRS","AAEEEE","AAFIRS","ADENNN","AEEEEM",
	"AEEGMU","AEGMNN","AFIRSY","BJKQXZ","CCNSTW",
	"CEIILT","CEILPT","CEIPST","DDLNOR","DHHLOR",
	"DHHNOT","DHLNOR","EIIITT","EMOTTT","ENSSSU",
	"FIPRSY","GORRVW","HIPRRY","NOOTUW","OOOTTU"
	];

	function isWord(word){
		var isEnglishWord = document.words.indexOf(word) != -1;
		var lengthGreaterThanThree = word.length > 3;
		if(!isEnglishWord)alert(word+" is not a valid English word");
		if(!lengthGreaterThanThree)alert("Words must be at least 4 characters");
		return isEnglishWord && lengthGreaterThanThree;
	}

	function submitWord(obj){
		// Get word
		let word = obj.value;

		// Reset to blank
		obj.value = ""

		// Add word to list, if word
		if(isWord(word)){
			var listElement  = document.createElement("li");
			listElement.id = word;
			listElement.innerText = word;
			document.getElementById("wordList").appendChild(listElement);
		}

	}

	function shuffledBoard(){
		var newBoardDice = JSON.parse(JSON.stringify(document.boggleDice));
		var board = [];
		for(let i = newBoardDice.length - 1; i > 0; i--){
			const j = Math.floor(Math.random() * i)
			const temp = newBoardDice[i]
			newBoardDice[i] = newBoardDice[j]
			newBoardDice[j] = temp
		}
		for(var i = 0; i < newBoardDice.length / 5; i++){
			var arr = [];
			for(var j = 0;j < 5;j ++){
				var str = newBoardDice[i];
				var index = Math.floor(Math.random() * str.length);
				var letter = str.substring(index,index+1);
				arr.push(letter);
			}
			board.push(arr);
		}
		
		return board;
	}

	function changeNumberOfPlayers(change){
		document.numberOfPlayers = Math.max(1,document.numberOfPlayers + change);
		document.getElementById("numPlayers").innerText = "Number of players: "+document.numberOfPlayers;
	}

	function submitBoard(){
		var arr = [];
		console.log(arr);
		var finished = 1;
		for(var i = 1; i <= 5;i++){
			var line = []
			// arr.push([]);
			for(var j = 1; j <= 5; j++){
				var name = "setup_tile_"+j+"_"+i;
				var value = document.getElementById(name).value;
				if(value == "") finished = 0;
				line.push(value);
			}
			arr.push(line);
		}
		document.letters = arr;
		console.log(arr);

		// var cheating2d=[["A","C","S","H","M"],["A","C","S","H","M"],["A","C","S","H","M"],["A","C","S","H","M"],["A","C","S","H","M"]];
		var shuffled = shuffledBoard();



		finished = 1;
		arr = shuffled;
		if(finished){
			for(var i = 0; i < 5; i++){
				for(var j = 0; j < 5; j++){
					var divContainer = document.createElement("div");
					divContainer.id = "row_"+i+"_column_"+j;
					divContainer.className = "grid-item";
					divContainer.innerText = arr[i][j];
					document.getElementById("grid-container").appendChild(divContainer);
				}
			}

			document.getElementById("setup").style.display = "none";
			// document.getElementById("setupNumPlayers").style.display = "none";
			// document.getElementById("submitSetupButton").style.display = "none";
			document.getElementById("game").style.display = "";
		}

	}
</script>

<body>
	<h1 class="header">Lorne's Boggle Game</h1>
	<div id = "rightMenu" class="rightMenu">
		<p>Words:</p>
		<ul id = "wordList">
		</ul>

	</div>
	<div id = "center" class = "centerContent">
		<div id ="setup">
			<div class = "setup" id = "setupNumPlayers">
				<button onclick="changeNumberOfPlayers(1)">+</button>
				<button onclick="changeNumberOfPlayers(-1)">-</button>
				<p id = "numPlayers">Number of players: 1</p>
			</div>
			<div id ="setupBoard" class = "center">
				<div id ="grid" class="grid-container">
					<div>
						<div class="grid-item">
							<input id="setup_tile_1_1" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_1_2" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_1_3" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_1_4" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_1_5" class="letter" type="text" name="username">
						</div>
					</div>
					<div>
						<div class="grid-item">
							<input id="setup_tile_2_1" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_2_2" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_2_3" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_2_4" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_2_5" class="letter" type="text" name="username">
						</div>
					</div>
					<div>
						<div class="grid-item">
							<input id="setup_tile_3_1" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_3_2" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_3_3" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_3_4" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_3_5" class="letter" type="text" name="username">
						</div>
					</div>
					<div>
						<div class="grid-item">
							<input id="setup_tile_4_1" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_4_2" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_4_3" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_4_4" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_4_5" class="letter" type="text" name="username">
						</div>
					</div>
					<div>
						<div class="grid-item">
							<input id="setup_tile_5_1" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_5_2" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_5_3" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_5_4" class="letter" type="text" name="username">
						</div>
						<div class="grid-item">
							<input id="setup_tile_5_5" class="letter" type="text" name="username">
						</div>
					</div>
				</div>
			</div>
			<div class = "setup" id="submitSetupButton">
				<button onclick="submitBoard()	">Submit</button>
			</div>
		</div>
		<div id = "game" style="display: none">
			<div id="finishedBoard" class = "center">
				<div id = "grid-container" class="grid-container">
				</div>

			</div>
			<div id ="wordInputDiv" style="text-align: -moz-center; text-align: -webkit-center;">
				<p>Enter words here:</p>
				<input id="wordsInput" style="border-radius: 1px; width: 150px; margin-bottom: 50px;" type="text" name="username" onchange="submitWord(this)">
			</div>
		</div>
	</div>
</body>

</html>